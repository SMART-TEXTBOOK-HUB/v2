<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Scanner Shop</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>

  <!-- Dynamic Top Right Auth Button (managed by JS) -->
  <!-- Top Right Auth (Glass Box) -->
  <div class="glass-auth-container" id="top-right-auth">
    <div id="auth-buttons-out" style="display:none; gap:10px;">
      <a href="login.html" class="btn-glass-blue">Sign In</a>
      <a href="login.html" class="btn-glass-blue">Sign Up</a>
    </div>
    <div id="auth-buttons-in" style="display:none; gap:10px;">
      <a href="shop.html" class="btn-glass-blue" id="btn-top-manage-shop">Manage Shop</a>
      <button id="btn-top-signout" class="btn-glass-blue" style="background:var(--danger) !important;">Sign Out</button>
    </div>
  </div>

  <!-- Sidebar (Hidden/Removed Items) -->
  <nav class="sidebar" id="app-sidebar" style="display:none;">
    <!-- Sidebar logic removed as requested -->
  </nav>

  <!-- Main Content -->
  <main class="scanner-container" style="padding-top: 80px;">

    <!-- View: Scanner (Default) -->
    <section id="view-scanner" class="view-section active">
      <div class="scanner-frame">
        <video id="video" muted playsinline></video>

        <div class="scan-overlay">
          <div class="scan-laser"></div>
          <div class="scan-corner tl"></div>
          <div class="scan-corner tr"></div>
          <div class="scan-corner bl"></div>
          <div class="scan-corner br"></div>
        </div>
      </div>

      <!-- View Cart Button (Floating) -->
      <button id="btn-view-cart" class="btn-glass-blue"
        style="position:fixed; bottom:20px; left:20px; z-index:100; padding:10px 20px;">
        <i class="fas fa-shopping-cart"></i> View Cart
      </button>

      <!-- Cart Modal (Glass Box) -->
      <div class="modal-overlay" id="cart-modal">
        <div class="login-wrapper" style="width:95%; max-width:500px; padding:20px; position:relative;">
          <button class="btn-icon-danger" id="btn-close-cart"
            style="position:absolute; top:15px; right:15px; font-size:1.2rem;">
            <i class="fas fa-times"></i>
          </button>
          <h2 style="margin-top:0; margin-bottom:20px;">Your Cart</h2>

          <div class="table-container" style="background:transparent; padding:0; max-height:300px; overflow-y:auto;">
            <table style="width:100%; border-collapse:collapse;">
              <thead>
                <tr style="border-bottom:1px solid #333;">
                  <th style="width:30px;"></th>
                  <th style="text-align:left; padding:8px;">Item</th>
                  <th style="text-align:center; padding:8px;">Qty</th>
                  <th style="text-align:right; padding:8px;">Cost</th>
                </tr>
              </thead>
              <tbody id="cart-items"></tbody>
            </table>
          </div>

          <div
            style="display:flex; justify-content:space-between; align-items:center; margin-top:20px; border-top:1px solid #333; padding-top:15px;">
            <span style="color:#aaa;">Total:</span>
            <span class="cart-total" id="cart-total-price" style="font-size:1.5rem; color:var(--success);">â‚¹0.00</span>
          </div>

          <div style="display:flex; gap:10px; margin-top:20px; justify-content: flex-end;">
            <button class="btn btn-secondary" onclick="window.Cart.clearCart()"
              style="background:var(--danger); color:white; border:none;">Clear Cart</button>
          </div>
        </div>
      </div>
    </section>



    <!-- View: Shop Management -->
    <section id="view-manage-shop" class="view-section" style="width:100%; align-items:center;">
      <div id="shop-content" style="width:100%; display:flex; flex-direction:column; align-items:center;">
        <!-- Populated by JS -->
      </div>
    </section>

  </main>

  <!-- Scan Result Modal (Enhanced for Product) -->
  <div class="modal-overlay" id="result-modal">
    <div class="modal-content">
      <h3 id="scan-product-name" style="margin-bottom:5px;">Product Name</h3>
      <div id="scan-product-price" style="color:var(--success); font-weight:600; font-size:1.2rem; margin-bottom:20px;">
        $0.00</div>

      <div class="form-group">
        <label class="form-label">Quantity</label>
        <input type="number" id="scan-qty" class="form-input" value="1" min="1">
      </div>

      <div class="action-buttons">
        <button class="btn btn-primary" id="btn-add-to-cart">Add to Cart</button>
        <button class="btn btn-secondary"
          onclick="document.getElementById('result-modal').classList.remove('active'); window.resumeScan()">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Initialization -->
  <script type="module" src="script.js"></script>
</body>

</html>